'use client'

import { useState, useEffect } from 'react'
import { Card, CardContent } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"

const prayerTimes = {
  khenchela: {
    fajr: '03:39',
    dhuhr: '12:36',
    asr: '16:25',
    maghrib: '19:54',
    isha: '21:31'
  },
  ankara: {
    fajr: '03:25',
    dhuhr: '12:59',
    asr: '16:56',
    maghrib: '20:29',
    isha: '22:16'
  }
}

export default function Component() {
  const [time, setTime] = useState(new Date())
  const [nextPrayer, setNextPrayer] = useState({ name: '', time: '', countdown: '' })

  useEffect(() => {
    const timer = setInterval(() => {
      setTime(new Date())
      updateNextPrayer()
    }, 1000)

    return () => clearInterval(timer)
  }, [])

  const formatTime = (date: Date, timezone: string) => {
    return date.toLocaleTimeString('en-US', { 
      timeZone: timezone, 
      hour: '2-digit', 
      minute: '2-digit', 
      second: '2-digit', 
      hour12: false 
    })
  }

  const formatDate = (date: Date, timezone: string) => {
    return date.toLocaleDateString('en-US', { 
      timeZone: timezone, 
      weekday: 'short', 
      year: 'numeric', 
      month: 'short', 
      day: 'numeric' 
    })
  }

  const updateNextPrayer = () => {
    const now = new Date()
    const currentTime = now.getHours() * 60 + now.getMinutes()
    
    let nextPrayerName = ''
    let nextPrayerTime = Infinity
    let location = 'khenchela'

    if (now.getHours() >= 22) {
      location = 'ankara'
    }

    for (const [prayer, time] of Object.entries(prayerTimes[location])) {
      const [hours, minutes] = time.split(':').map(Number)
      const prayerMinutes = hours * 60 + minutes
      if (prayerMinutes > currentTime && prayerMinutes < nextPrayerTime) {
        nextPrayerName = prayer
        nextPrayerTime = prayerMinutes
      }
    }

    if (nextPrayerName === '') {
      nextPrayerName = 'fajr'
      nextPrayerTime = 24 * 60 + prayerTimes[location].fajr.split(':').map(Number).reduce((acc, time) => acc * 60 + time)
    }

    const timeDiff = nextPrayerTime - currentTime
    const hours = Math.floor(timeDiff / 60)
    const minutes = timeDiff % 60

    setNextPrayer({
      name: nextPrayerName,
      time: prayerTimes[location][nextPrayerName],
      countdown: `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`
    })
  }

  const prayerNameInArabic = {
    fajr: 'الفجر',
    dhuhr: 'الظهر',
    asr: 'العصر',
    maghrib: 'المغرب',
    isha: 'العشاء'
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex flex-col items-center justify-center p-4">
      <h1 className="text-3xl font-bold text-white mb-8">Welcome to my first site</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl">
        <ClockCard
          city="Khenchela, Algeria"
          time={formatTime(time, 'Africa/Algiers')}
          date={formatDate(time, 'Africa/Algiers')}
          prayerTimes={prayerTimes.khenchela}
        />
        <ClockCard
          city="Ankara, Turkey"
          time={formatTime(time, 'Europe/Istanbul')}
          date={formatDate(time, 'Europe/Istanbul')}
          prayerTimes={prayerTimes.ankara}
        />
      </div>
      <div className="mt-8 text-white text-center">
        <h2 className="text-2xl font-semibold mb-2">الصلاة القادمة</h2>
        <p className="text-xl">
          {prayerNameInArabic[nextPrayer.name]} في {nextPrayer.time}
        </p>
        <p className="text-lg">الوقت المتبقي: {nextPrayer.countdown}</p>
      </div>
    </div>
  )
}

function ClockCard({ city, time, date, prayerTimes }) {
  const prayerNameInArabic = {
    fajr: 'الفجر',
    dhuhr: 'الظهر',
    asr: 'العصر',
    maghrib: 'المغرب',
    isha: 'العشاء'
  }

  return (
    <Card className="w-full">
      <CardContent className="p-6">
        <h2 className="text-2xl font-bold mb-4">{city}</h2>
        <div className="text-4xl font-bold mb-2">{time}</div>
        <div className="text-gray-600 mb-4">{date}</div>
        <div className="grid grid-cols-2 gap-2">
          {Object.entries(prayerTimes).map(([prayer, time]) => (
            <Badge key={prayer} variant="outline" className="text-sm">
              {prayerNameInArabic[prayer]}: {time}
            </Badge>
          ))}
        </div>
      </CardContent>
    </Card>
  )
}'use client'

import { useState, useEffect } from 'react'
import { Card, CardContent } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"

const prayerTimes = {
  khenchela: {
    fajr: '03:39',
    dhuhr: '12:36',
    asr: '16:25',
    maghrib: '19:54',
    isha: '21:31'
  },
  ankara: {
    fajr: '03:25',
    dhuhr: '12:59',
    asr: '16:56',
    maghrib: '20:29',
    isha: '22:16'
  }
}

export default function Component() {
  const [time, setTime] = useState(new Date())
  const [nextPrayer, setNextPrayer] = useState({ name: '', time: '', countdown: '' })

  useEffect(() => {
    const timer = setInterval(() => {
      setTime(new Date())
      updateNextPrayer()
    }, 1000)

    return () => clearInterval(timer)
  }, [])

  const formatTime = (date: Date, timezone: string) => {
    return date.toLocaleTimeString('en-US', { 
      timeZone: timezone, 
      hour: '2-digit', 
      minute: '2-digit', 
      second: '2-digit', 
      hour12: false 
    })
  }

  const formatDate = (date: Date, timezone: string) => {
    return date.toLocaleDateString('en-US', { 
      timeZone: timezone, 
      weekday: 'short', 
      year: 'numeric', 
      month: 'short', 
      day: 'numeric' 
    })
  }

  const updateNextPrayer = () => {
    const now = new Date()
    const currentTime = now.getHours() * 60 + now.getMinutes()
    
    let nextPrayerName = ''
    let nextPrayerTime = Infinity
    let location = 'khenchela'

    if (now.getHours() >= 22) {
      location = 'ankara'
    }

    for (const [prayer, time] of Object.entries(prayerTimes[location])) {
      const [hours, minutes] = time.split(':').map(Number)
      const prayerMinutes = hours * 60 + minutes
      if (prayerMinutes > currentTime && prayerMinutes < nextPrayerTime) {
        nextPrayerName = prayer
        nextPrayerTime = prayerMinutes
      }
    }

    if (nextPrayerName === '') {
      nextPrayerName = 'fajr'
      nextPrayerTime = 24 * 60 + prayerTimes[location].fajr.split(':').map(Number).reduce((acc, time) => acc * 60 + time)
    }

    const timeDiff = nextPrayerTime - currentTime
    const hours = Math.floor(timeDiff / 60)
    const minutes = timeDiff % 60

    setNextPrayer({
      name: nextPrayerName,
      time: prayerTimes[location][nextPrayerName],
      countdown: `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}`
    })
  }

  const prayerNameInArabic = {
    fajr: 'الفجر',
    dhuhr: 'الظهر',
    asr: 'العصر',
    maghrib: 'المغرب',
    isha: 'العشاء'
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-500 to-purple-600 flex flex-col items-center justify-center p-4">
      <h1 className="text-3xl font-bold text-white mb-8">Welcome to my first site</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-4xl">
        <ClockCard
          city="Khenchela, Algeria"
          time={formatTime(time, 'Africa/Algiers')}
          date={formatDate(time, 'Africa/Algiers')}
          prayerTimes={prayerTimes.khenchela}
        />
        <ClockCard
          city="Ankara, Turkey"
          time={formatTime(time, 'Europe/Istanbul')}
          date={formatDate(time, 'Europe/Istanbul')}
          prayerTimes={prayerTimes.ankara}
        />
      </div>
      <div className="mt-8 text-white text-center">
        <h2 className="text-2xl font-semibold mb-2">الصلاة القادمة</h2>
        <p className="text-xl">
          {prayerNameInArabic[nextPrayer.name]} في {nextPrayer.time}
        </p>
        <p className="text-lg">الوقت المتبقي: {nextPrayer.countdown}</p>
      </div>
    </div>
  )
}

function ClockCard({ city, time, date, prayerTimes }) {
  const prayerNameInArabic = {
    fajr: 'الفجر',
    dhuhr: 'الظهر',
    asr: 'العصر',
    maghrib: 'المغرب',
    isha: 'العشاء'
  }

  return (
    <Card className="w-full">
      <CardContent className="p-6">
        <h2 className="text-2xl font-bold mb-4">{city}</h2>
        <div className="text-4xl font-bold mb-2">{time}</div>
        <div className="text-gray-600 mb-4">{date}</div>
        <div className="grid grid-cols-2 gap-2">
          {Object.entries(prayerTimes).map(([prayer, time]) => (
            <Badge key={prayer} variant="outline" className="text-sm">
              {prayerNameInArabic[prayer]}: {time}
            </Badge>
          ))}
        </div>
      </CardContent>
    </Card>
  )
}
